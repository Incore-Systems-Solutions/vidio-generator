import{c as L,j as e,B as U}from"./createLucideIcon.BWUjMJ0t.js";import{r as l}from"./index.RH_Wq4ov.js";import{p as H}from"./api.BgGK7ZEH.js";import{S as O}from"./sparkles.DUVF_Rgm.js";import{L as Y}from"./loader-circle.whxegmsq.js";import{V as q}from"./video.CTT0PdyH.js";import{P as Z}from"./play.CmT1PXqT.js";import{C as G}from"./calendar.nuBBCmxz.js";import{X}from"./x.DC3K5u7y.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],J=L("maximize",K);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],W=L("minimize",Q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],te=L("pause",ee);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],re=L("volume-2",ae);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],le=L("volume-x",se),z={ID:{badge:"Video yang Dibuat AI",title:"Galeri Video",description:"Koleksi video AI terbaik yang dibuat oleh pengguna kami.",loadingTitle:"Memuat video...",loadingDesc:"Mengambil galeri AI terbaru",errorMessage:"Gagal memuat video. Silakan coba lagi nanti.",retryButton:"Coba Lagi",loadMoreButton:"Muat Lebih Banyak Video",loadingButton:"Memuat...",endMessage:"Semua video telah ditampilkan",modalTitle:"Pemutar Video",modalCreatedOn:"Dibuat pada",videoNotAvailable:"Video Tidak Tersedia",videoUnavailableDesc:"Video ini saat ini tidak tersedia",createdBy:"Dibuat oleh",videoDescription:"Deskripsi"},EN:{badge:"AI Generated Videos",title:"Video Gallery",description:"The best AI video collection created by our users.",loadingTitle:"Loading videos...",loadingDesc:"Fetching latest AI gallery",errorMessage:"Failed to load videos. Please try again later.",retryButton:"Try Again",loadMoreButton:"Load More Videos",loadingButton:"Loading...",endMessage:"All videos have been displayed",modalTitle:"Video Player",modalCreatedOn:"Created on",videoNotAvailable:"Video Not Available",videoUnavailableDesc:"This video is currently unavailable",createdBy:"Created by",videoDescription:"Description"},ZH:{badge:"AI 生成的视频",title:"视频库",description:"由我们用户创建的最佳 AI 视频集合。",loadingTitle:"加载视频中...",loadingDesc:"获取最新 AI 画廊",errorMessage:"加载视频失败。请稍后再试。",retryButton:"重试",loadMoreButton:"加载更多视频",loadingButton:"加载中...",endMessage:"所有视频已显示",modalTitle:"视频播放器",modalCreatedOn:"创建于",videoNotAvailable:"视频不可用",videoUnavailableDesc:"此视频当前不可用",createdBy:"创建者",videoDescription:"描述"},AR:{badge:"مقاطع فيديو منشأة بالذكاء الاصطناعي",title:"معرض الفيديو",description:"أفضل مجموعة فيديو AI تم إنشاؤها بواسطة مستخدمينا.",loadingTitle:"جاري تحميل مقاطع الفيديو...",loadingDesc:"جلب أحدث معرض AI",errorMessage:"فشل تحميل مقاطع الفيديو. يرجى المحاولة مرة أخرى لاحقًا.",retryButton:"حاول مرة أخرى",loadMoreButton:"تحميل المزيد من مقاطع الفيديو",loadingButton:"جاري التحميل...",endMessage:"تم عرض جميع مقاطع الفيديو",modalTitle:"مشغل الفيديو",modalCreatedOn:"تم الإنشاء في",videoNotAvailable:"الفيديو غير متوفر",videoUnavailableDesc:"هذا الفيديو غير متوفر حاليًا",createdBy:"تم إنشاؤه بواسطة",videoDescription:"الوصف"}};function be(){const[n,v]=l.useState(null),[S,b]=l.useState([]),[m,y]=l.useState(!0),[j,_]=l.useState(!1),[f,x]=l.useState(null),[p,N]=l.useState(1),[w,T]=l.useState(1),[i,o]=l.useState("ID"),[k,F]=l.useState({}),[u,d]=l.useState(null),[M,V]=l.useState(!1),[E,g]=l.useState(null);l.useEffect(()=>{const a=localStorage.getItem("preferredLanguage");a&&z[a]&&o(a);const t=()=>{const r=localStorage.getItem("preferredLanguage");r&&z[r]&&o(r)},s=setInterval(()=>{const r=localStorage.getItem("preferredLanguage");r&&r!==i&&o(r)},500);return window.addEventListener("languageChanged",t),()=>{window.removeEventListener("languageChanged",t),clearInterval(s)}},[i]),l.useEffect(()=>{(async()=>{try{p===1?y(!0):_(!0),x(null);const t=await H.getPublicVideos(p,12);b(p===1?t.data:r=>[...r,...t.data]),T(t.last_page);const s={};t.data.forEach(r=>{r.user&&r.user.email&&(s[r.user_id]=r.user.email)}),F(r=>({...r,...s}))}catch(t){console.error("Error fetching videos:",t),x("Failed to load videos. Please try again later.")}finally{y(!1),_(!1)}})()},[p]),l.useEffect(()=>{n&&$(n.id,i)},[i,n]);const h=a=>{v(a),$(a.id,i)},D=()=>{p<w&&!m&&!j&&N(a=>a+1)},I=()=>{N(1),b([]),x(null)},C=a=>{const t=new Date(a),s=i==="ID"?"id-ID":i==="ZH"?"zh-CN":i==="AR"?"ar-SA":"en-US";return t.toLocaleDateString(s,{day:"numeric",month:"long",year:"numeric"})},A=a=>{if(!a)return"";const[t,s]=a.split("@");if(t.length<=4)return`${t[0]}${"*".repeat(t.length-1)}@${s}`;const r=Math.floor(t.length/3),R=Math.floor(t.length*2/3);return`${t.substring(0,r)+"*".repeat(R-r)+t.substring(R)}@${s}`},B=a=>({ID:"id",EN:"en",ZH:"zh",AR:"ar"})[a]||"id",$=async(a,t)=>{try{V(!0);const s=B(t),r=await H.getVideoDetail(a,s);d(r.data),r.data.user&&g(r.data.user)}catch(s){console.error("Error fetching video detail:",s),d(null),g(null)}finally{V(!1)}},P=a=>{if(u){let t=u.prompt;switch(i){case"EN":u.prompt_en&&(t=u.prompt_en);break;case"ZH":u.prompt_zh&&(t=u.prompt_zh);break;case"AR":u.prompt_ar&&(t=u.prompt_ar);break}const s=t.match(/(?:Visual Description|Deskripsi Visual|视觉描述|الوصف البصري)[:\s]*(.*?)(?=\n\n|\nSub Scene|\nSub Scene|$)/s);return s&&s[1]?s[1].trim():t.length>200?t.substring(0,200)+"...":t}if(a.prompt&&typeof a.prompt=="string"){const t=a.prompt,s=t.match(/Deskripsi[:\s]*(.*?)(?=\n\n|\nSub Scene|$)/s);return s&&s[1]?s[1].trim():t.length>200?t.substring(0,200)+"...":t}return"No description available"},c=z[i];return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"text-center mb-16 relative",children:[e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-purple-500/10 via-blue-500/10 to-purple-500/10 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"inline-flex items-center space-x-2 bg-gradient-to-r from-purple-500/10 to-blue-500/10 border border-purple-500/20 rounded-full px-4 py-2 mb-6",children:[e.jsx(O,{className:"w-4 h-4 text-purple-400"}),e.jsx("span",{className:"text-sm font-medium text-purple-300",children:c.badge})]}),e.jsx("h2",{className:"text-5xl md:text-6xl font-bold mb-6 tracking-tight",children:e.jsx("span",{className:"bg-gradient-to-r from-purple-400 via-blue-400 to-purple-400 bg-clip-text text-transparent bg-[length:200%_auto] animate-gradient",children:c.title})}),e.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto text-lg leading-relaxed",children:c.description})]})]}),m&&e.jsx("div",{className:"flex justify-center items-center py-24",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full blur-xl opacity-20 animate-pulse"}),e.jsxs("div",{className:"relative flex flex-col items-center space-y-4 bg-slate-900/50 border border-purple-500/20 rounded-2xl px-12 py-8 backdrop-blur-sm",children:[e.jsx(Y,{className:"w-8 h-8 animate-spin text-purple-400"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-300 text-sm font-medium",children:c.loadingTitle}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:c.loadingDesc})]})]})]})}),f&&e.jsx("div",{className:"text-center py-24",children:e.jsxs("div",{className:"max-w-md mx-auto bg-gradient-to-br from-red-500/5 to-orange-500/5 border border-red-500/20 rounded-2xl p-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-br from-red-500/20 to-orange-500/20 rounded-full flex items-center justify-center",children:e.jsx(q,{className:"w-8 h-8 text-red-400"})}),e.jsx("p",{className:"text-gray-300 mb-6 text-sm",children:c.errorMessage}),e.jsx(U,{onClick:I,className:"bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white border-0 shadow-lg shadow-purple-500/20",children:c.retryButton})]})}),!m&&!f&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:S.map((a,t)=>{const s=a.final_url_merge_video;return s?e.jsxs("div",{className:"group cursor-pointer relative",onClick:()=>h(a),children:[e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-purple-500 via-blue-500 to-purple-500 rounded-2xl opacity-0 group-hover:opacity-30 blur-xl transition-all duration-500 group-hover:duration-200"}),e.jsx("div",{className:"relative overflow-hidden rounded-2xl border border-slate-800/50 bg-gradient-to-br from-slate-900/90 to-slate-950/90 backdrop-blur-sm aspect-video transition-all duration-300 group-hover:border-purple-500/50 group-hover:shadow-2xl group-hover:shadow-purple-500/20 group-hover:scale-[1.02]",children:e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("video",{className:"w-full h-full object-cover transition-all duration-700 group-hover:scale-110",muted:!0,loop:!0,playsInline:!0,preload:"metadata",onMouseEnter:r=>{r.currentTarget.play()},onMouseLeave:r=>{r.currentTarget.pause(),r.currentTarget.currentTime=0},children:e.jsx("source",{src:s,type:"video/mp4"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-950/95 via-slate-950/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 transform scale-75 group-hover:scale-100",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-blue-500 rounded-full p-6 shadow-2xl shadow-purple-500/50",children:e.jsx(Z,{className:"w-8 h-8 text-white fill-current"})})}),e.jsxs("div",{className:"absolute bottom-4 left-4 flex items-center space-x-2 bg-slate-900/80 backdrop-blur-sm rounded-full px-3 py-1.5 border border-white/10 opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:[e.jsx(G,{className:"w-3 h-3 text-purple-400"}),e.jsx("span",{className:"text-xs text-gray-300 font-medium",children:C(a.created_at)})]})]})})]},`${a.id}-${t}`):null})}),!m&&!f&&p<w&&e.jsx("div",{className:"text-center mt-16",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full blur-xl opacity-20"}),e.jsx(U,{onClick:D,size:"lg",disabled:j,className:"relative bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white border-0 shadow-xl shadow-purple-500/30 px-8 py-6 text-base font-medium transition-all duration-300 hover:scale-105 disabled:opacity-50 disabled:hover:scale-100",children:j?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-5 h-5 mr-2 animate-spin"}),c.loadingButton]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-5 h-5 mr-2"}),c.loadMoreButton]})})]})}),!m&&!f&&p>=w&&S.length>0&&e.jsx("div",{className:"text-center mt-16",children:e.jsxs("div",{className:"inline-flex items-center space-x-2 bg-gradient-to-r from-purple-500/10 to-blue-500/10 border border-purple-500/20 rounded-full px-6 py-3",children:[e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full animate-pulse"}),e.jsx("p",{className:"text-gray-400 text-sm font-medium",children:c.endMessage})]})}),n&&e.jsx(oe,{video:n,onClose:()=>{v(null),d(null),g(null)},formatDate:C,translations:c,userEmails:k,censorEmail:A,getVideoDescription:P,videoDetail:u,loadingDetail:M,currentVideoUser:E}),e.jsx("style",{children:`
        @keyframes gradient {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient {
          animation: gradient 6s ease infinite;
        }
      `})]})}function oe({video:n,onClose:v,formatDate:S,translations:b,userEmails:m,censorEmail:y,getVideoDescription:j,videoDetail:_,loadingDetail:f,currentVideoUser:x}){const p=n.final_url_merge_video,[N,w]=l.useState(!1),[T,i]=l.useState(!1),[o,k]=l.useState(!1),[F,u]=l.useState(0),d=l.useRef(null),M=l.useRef(null),V=()=>{d.current&&(d.current.muted=!d.current.muted,w(d.current.muted))},E=()=>{d.current&&(d.current.paused?(d.current.play(),i(!0)):(d.current.pause(),i(!1)))},g=async()=>{if(document.fullscreenElement)try{await document.exitFullscreen(),k(!1)}catch(h){console.error("Error attempting to exit fullscreen:",h)}else try{M.current?.requestFullscreen&&(await M.current.requestFullscreen(),k(!0))}catch(h){console.error("Error attempting to enable fullscreen:",h)}};return l.useEffect(()=>{const h=()=>{u(window.orientation||0),Math.abs(window.orientation||0)===90&&(o||g())},D=()=>{k(!!document.fullscreenElement)};return window.addEventListener("orientationchange",h),document.addEventListener("fullscreenchange",D),()=>{window.removeEventListener("orientationchange",h),document.removeEventListener("fullscreenchange",D)}},[o]),e.jsxs("div",{ref:M,className:`fixed inset-0 z-[9999] flex items-center justify-center ${o?"p-0":"p-4"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-slate-950/95 backdrop-blur-xl",onClick:v}),e.jsxs("div",{className:`relative w-full mx-auto ${o?"h-full max-w-none":"max-w-4xl"}`,children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-purple-500 via-blue-500 to-purple-500 rounded-2xl opacity-30 blur-2xl"}),e.jsxs("div",{className:`relative bg-black overflow-hidden shadow-2xl shadow-purple-500/20 ${o?"h-full rounded-none":"rounded-2xl"}`,children:[e.jsx("button",{onClick:v,className:"absolute top-4 right-4 z-20 text-white hover:text-red-400 hover:bg-red-500/20 border border-red-500/30 rounded-full p-2 transition-all duration-300 hover:scale-110 bg-black/50 backdrop-blur-sm",children:e.jsx(X,{className:"w-5 h-5"})}),e.jsx("button",{onClick:g,className:"absolute top-4 right-16 z-20 text-white hover:text-purple-400 hover:bg-purple-500/20 border border-purple-500/30 rounded-full p-2 transition-all duration-300 hover:scale-110 bg-black/50 backdrop-blur-sm",children:o?e.jsx(W,{className:"w-5 h-5"}):e.jsx(J,{className:"w-5 h-5"})}),e.jsx("div",{className:`relative bg-black ${o?"h-full":"aspect-video"}`,children:p?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{className:"absolute -inset-2 bg-gradient-to-r from-purple-500/20 via-blue-500/20 to-purple-500/20 blur-2xl"}),e.jsxs("video",{ref:d,controls:!1,autoPlay:!0,loop:!0,muted:N,playsInline:!0,className:`relative w-full h-full ${o?"object-contain":"object-cover"}`,onPlay:()=>i(!0),onPause:()=>i(!1),onDoubleClick:g,children:[e.jsx("source",{src:p,type:"video/mp4"}),"Your browser does not support the video tag."]}),e.jsxs("div",{className:"absolute inset-0 pointer-events-none",onTouchStart:h=>{const I=h.touches[0].clientY,C=Date.now(),A=B=>{const P=B.changedTouches[0].clientY,c=Date.now(),a=I-P,t=c-C;a>50&&t<300?o||g():a<-50&&t<300&&o&&g(),document.removeEventListener("touchend",A)};document.addEventListener("touchend",A)},children:[e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1/3 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),e.jsxs("div",{className:`absolute top-4 left-4 flex items-center space-x-2 pointer-events-auto ${o?"opacity-0 hover:opacity-100 transition-opacity duration-300":""}`,children:[e.jsx("button",{onClick:E,className:"bg-black/50 backdrop-blur-sm rounded-full p-2 border border-white/20 hover:bg-white/10 transition-all duration-300 hover:scale-110",children:T?e.jsx(te,{className:"w-4 h-4 text-white"}):e.jsx(Z,{className:"w-4 h-4 text-white"})}),e.jsx("button",{onClick:V,className:"bg-black/50 backdrop-blur-sm rounded-full p-2 border border-white/20 hover:bg-white/10 transition-all duration-300 hover:scale-110",children:N?e.jsx(le,{className:"w-4 h-4 text-white"}):e.jsx(re,{className:"w-4 h-4 text-white"})})]}),e.jsxs("div",{className:`absolute bottom-4 left-4 right-4 space-y-3 max-w-md ${o?"opacity-0 hover:opacity-100 transition-opacity duration-300":""}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:x?.email?x.email.charAt(0).toUpperCase():m[n.user_id]?m[n.user_id].charAt(0).toUpperCase():"?"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-semibold text-sm truncate",children:x?.email?y(x.email):m[n.user_id]?y(m[n.user_id]):"Loading..."}),e.jsx("p",{className:"text-gray-300 text-xs",children:S(n.created_at)})]})]}),e.jsx("div",{className:"space-y-2",children:f?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),e.jsx("span",{className:"text-white/70 text-sm",children:"Loading description..."})]}):e.jsx("p",{className:"text-white text-sm leading-relaxed line-clamp-3",children:j(n)})})]})]})]}):e.jsx("div",{className:"aspect-video bg-gradient-to-br from-slate-900 to-slate-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(q,{className:"w-24 h-24 mx-auto mb-6 text-purple-500/30"}),e.jsx("div",{className:"text-2xl font-bold text-gray-300 mb-4",children:b.videoNotAvailable}),e.jsx("p",{className:"text-gray-500",children:b.videoUnavailableDesc})]})})})]})]}),e.jsx("style",{children:`
        .line-clamp-3 {
          display: -webkit-box;
          -webkit-line-clamp: 3;
          -webkit-box-orient: vertical;
          overflow: hidden;
        }
      `})]})}export{be as VideoGallery};
