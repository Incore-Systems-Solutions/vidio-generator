import{c as E,j as e,a as V,B as i}from"./createLucideIcon.C9qM8KNi.js";import{r as l}from"./index.CY-HDqYb.js";import{p as _}from"./api.a2yr6dSM.js";import{U as S}from"./user.DwRibW2I.js";import{P as M}from"./play.vIkBtBUm.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],N=E("loader-circle",R);function A({className:s,...t}){return e.jsx("div",{"data-slot":"card2",className:V("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border shadow-sm transition-all duration-200",s),...t})}function $({className:s,...t}){return e.jsx("div",{"data-slot":"card-content",className:V("px-6",s),...t})}const B=s=>{const t=s.prompt.split(" ").filter(m=>m.length>3).slice(0,3).map(m=>m.replace(/[.,!?]/g,"")),n=Math.floor(s.prompt.length/50)+1,o=Math.floor(n/60),c=n%60,g=`${o}:${c.toString().padStart(2,"0")}`;return{id:s.id.toString(),title:s.prompt.length>50?s.prompt.substring(0,50)+"...":s.prompt,creator:s.user.name,likes:Math.floor(Math.random()*500)+10,thumbnail:s.url_video,duration:g,tags:t,isVideo:!0,url_video:s.url_video,prompt:s.prompt}};function K({onVideoClick:s}){const[t,n]=l.useState(null),[o,c]=l.useState(null),[g,m]=l.useState(!1),[h,f]=l.useState([]),[u,b]=l.useState(!0),[j,y]=l.useState(!1),[x,v]=l.useState(null),[d,w]=l.useState(1),[p,C]=l.useState(1);l.useEffect(()=>{(async()=>{try{d===1?b(!0):y(!0),v(null);const a=await _.getPublicVideos(d,10),k=a.data.map(B);f(d===1?k:T=>[...T,...k]),C(a.last_page)}catch(a){console.error("Error fetching videos:",a),v("Failed to load videos. Please try again later.")}finally{b(!1),y(!1)}})()},[d]);const L=async r=>{n(r),m(!0),c(null);try{const a=await _.getVideoDetail(r.id);c(a.data)}catch(a){console.error("Error fetching video detail:",a)}finally{m(!1)}s?.(r)},P=()=>{d<p&&!u&&!j&&w(r=>r+1)},z=()=>{w(1),f([]),v(null)};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-4xl font-light text-foreground mb-6 tracking-tight",children:"Galeri Video"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto text-lg leading-relaxed",children:"Klik Video untuk Lihat Detail Video dan Promptnya."})]}),u&&e.jsx("div",{className:"flex justify-center items-center py-16",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(N,{className:"w-6 h-6 animate-spin text-gray-400"}),e.jsx("span",{className:"text-muted-foreground text-sm",children:"Loading videos..."})]})}),x&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:x}),e.jsx(i,{onClick:z,variant:"outline",className:"border-gray-200 hover:border-gray-300 hover:bg-gray-50",children:"Try Again"})]}),!u&&!x&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:h.map(r=>e.jsx(A,{className:"group cursor-pointer transition-all duration-300 hover:shadow-2xl border-0 bg-white overflow-hidden rounded-xl aspect-video",onClick:()=>L(r),children:e.jsx($,{className:"p-0 relative h-full",children:e.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[r.url_video?e.jsx("video",{className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",muted:!0,loop:!0,playsInline:!0,preload:"metadata",onMouseEnter:a=>{a.currentTarget.play()},onMouseLeave:a=>{a.currentTarget.pause(),a.currentTarget.currentTime=0},children:e.jsx("source",{src:r.url_video,type:"video/mp4"})}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center",children:e.jsxs("div",{className:"text-gray-500 text-center px-4",children:[e.jsx("div",{className:"text-lg font-medium mb-1",children:r.title.split(" ").slice(0,2).join(" ")}),e.jsx("div",{className:"text-sm opacity-70",children:r.title.split(" ").slice(2).join(" ")})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"absolute inset-0 flex flex-col justify-end p-5 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[e.jsx("div",{className:"text-white mb-4",children:e.jsx("p",{className:"text-sm leading-relaxed line-clamp-3 font-medium",children:r.prompt||r.title})}),e.jsxs("div",{className:"flex items-center text-white/90 text-xs",children:[e.jsx(S,{className:"w-3 h-3 mr-2"}),e.jsx("span",{className:"truncate font-medium",children:r.creator})]})]}),!r.url_video&&r.isVideo&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:"bg-white/95 rounded-full p-4 shadow-lg",children:e.jsx(M,{className:"w-6 h-6 text-gray-700 fill-current"})})})]})})},r.id))}),!u&&!x&&d<p&&e.jsx("div",{className:"text-center mt-12",children:e.jsx(i,{onClick:P,variant:"outline",size:"lg",disabled:j,className:"px-8 py-3 border-gray-200 hover:border-gray-300 hover:bg-gray-50 transition-colors duration-200",children:j?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading..."]}):`Load More Videos (${h.length} of ${p*10})`})}),!u&&!x&&d>=p&&h.length>0&&e.jsx("div",{className:"text-center mt-12",children:e.jsxs("p",{className:"text-muted-foreground text-sm",children:["You've reached the end! (",h.length," videos loaded)"]})}),t&&e.jsx(F,{video:t,videoDetail:o,loadingDetail:g,onClose:()=>{n(null),c(null)}})]})}function F({video:s,videoDetail:t,loadingDetail:n,onClose:o}){return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-background/80 backdrop-blur-sm",onClick:o}),e.jsxs("div",{className:"relative bg-background border shadow-2xl w-full h-full max-w-none max-h-none overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b bg-background/95 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(i,{variant:"ghost",size:"sm",onClick:o,className:"text-foreground hover:bg-muted",children:"←"}),e.jsx("div",{children:e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:s.title})})]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:o,className:"text-foreground hover:bg-muted",children:"✕"})]}),e.jsxs("div",{className:"flex h-[calc(100vh-80px)]",children:[e.jsx("div",{className:"flex-1 bg-muted/50 relative",children:s.url_video?e.jsx("div",{className:"w-full h-full relative",children:e.jsxs("video",{controls:!0,className:"w-full h-full object-cover",poster:s.thumbnail,children:[e.jsx("source",{src:s.url_video,type:"video/mp4"}),"Your browser does not support the video tag."]})}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-muted to-muted/80 flex items-center justify-center",children:e.jsxs("div",{className:"text-foreground text-center",children:[e.jsx("div",{className:"text-4xl font-bold mb-4",children:s.title.split(" ").slice(0,2).join(" ")}),e.jsx("div",{className:"text-lg opacity-80",children:s.title.split(" ").slice(2).join(" ")})]})})}),e.jsx("div",{className:"w-80 bg-background border-l overflow-y-auto",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-muted rounded-full flex items-center justify-center",children:e.jsx(S,{className:"w-5 h-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-foreground font-medium",children:s.creator}),e.jsxs("p",{className:"text-muted-foreground text-sm",children:["@",s.creator.toLowerCase().replace(/\s+/g,"_")]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-foreground font-semibold mb-3",children:"Details"}),e.jsx("div",{className:"space-y-2",children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Model:"}),e.jsx("span",{className:"text-foreground",children:t.model_ai})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Aspect Ratio:"}),e.jsx("span",{className:"text-foreground",children:t.aspect_ratio})]})]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-foreground font-semibold mb-3",children:"Start"}),e.jsx("div",{className:"w-20 h-20 bg-muted rounded-lg flex items-center justify-center",children:s.url_video?e.jsx("video",{className:"w-full h-full object-cover rounded-lg",muted:!0,children:e.jsx("source",{src:s.url_video,type:"video/mp4"})}):e.jsx(M,{className:"w-6 h-6 text-muted-foreground"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-foreground font-semibold",children:"Prompt"}),e.jsx(i,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground",onClick:()=>{t?.prompt&&navigator.clipboard.writeText(t.prompt)},children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),n?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(N,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):e.jsx("div",{className:"bg-muted rounded-lg p-4",children:e.jsx("p",{className:"text-foreground text-sm leading-relaxed",children:t?.prompt||s.prompt||"No prompt available"})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(i,{variant:"outline",size:"sm",className:"flex-1",children:"Video 2.1"}),e.jsx(i,{variant:"outline",size:"sm",className:"flex-1",children:"Professional Mode"})]}),e.jsx(i,{className:"w-full",size:"lg",onClick:()=>{if(t){const c={prompt:t.prompt||"",karakter_image:t.karakter_image||"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=400&fit=crop&crop=face",background_image:t.background_image||"https://images.unsplash.com/photo-1497366216548-37526070297c?w=400&h=300&fit=crop",aspek_rasio:t.aspect_ratio||"16:9",judul_video:t.prompt?.substring(0,50)||"Recreated Video",bahasa:t.bahasa||"id",gaya_suara:t.gaya_suara||"natural",voice_over:t.voice_over||"male",tone:t.tone||"professional",background_music:t.background_music||"upbeat",resolusi_video:t.resolusi_video||"1080p",is_share:t.share_url||"y"};localStorage.setItem("videoSetupData",JSON.stringify(c)),o(),window.location.href="/"}},children:"Recreate"})]})})]})]})]})}export{K as VideoGallery};
