import{c as Q,j as e,B as f}from"./createLucideIcon.C9qM8KNi.js";import{r as t}from"./index.CY-HDqYb.js";import{I as q}from"./input.DQP1lckO.js";import{C as E,a as U,b as W,c as D}from"./card.CwskAJbJ.js";import{B as $}from"./badge.Qd5udzr1.js";import{o as H,a as G}from"./api.a2yr6dSM.js";import{X as se,C as te}from"./x.Bdr1dCcl.js";import{M as re}from"./mail.C1wlOqJB.js";import{a as ne,C as X}from"./clock.ih07b0yA.js";import{C as F}from"./circle-check-big.btNzbIIr.js";import{v as k}from"./videoSetupStorage.CCIJS4Td.js";import{C as z}from"./credit-card.DBZyheI9.js";import{S as le}from"./sparkles.Bh5ZbUvE.js";import{V as ie}from"./video.C0_GaG-H.js";import{C as B}from"./check.DRUMQLy0.js";import{U as de}from"./user.DwRibW2I.js";import{A as oe}from"./arrow-left.CPws6s8x.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],me=Q("qr-code",ce);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],ue=Q("wallet",xe);function pe({isOpen:v,onClose:_,email:n,onSuccess:T}){const[l,w]=t.useState(""),[M,O]=t.useState(!1),[p,I]=t.useState(!1),[o,c]=t.useState(null),[i,N]=t.useState(null),[j,P]=t.useState(!1),[S,g]=t.useState(0),m=async()=>{try{I(!0),c(null);const r=await H.requestOTP({email:n});if(r.status){P(!0),N("OTP telah dikirim ke email Anda"),g(60);const y=setInterval(()=>{g(h=>h<=1?(clearInterval(y),0):h-1)},1e3)}else c(r.message||"Gagal mengirim OTP")}catch(r){c(r instanceof Error?r.message:"Gagal mengirim OTP")}finally{I(!1)}},V=async()=>{if(l.length!==6){c("OTP harus 6 digit");return}try{O(!0),c(null);const r=await H.validateOTP({email:n,otp:parseInt(l)});r.status&&r.data?(N("OTP berhasil divalidasi!"),setTimeout(()=>{T(r.data.quota),_()},1500)):c(r.message||"OTP tidak valid")}catch(r){c(r instanceof Error?r.message:"Gagal memvalidasi OTP")}finally{O(!1)}},b=()=>{w(""),c(null),N(null),P(!1),g(0),_()};return v?e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs(E,{className:"w-full max-w-md bg-white/95 dark:bg-gray-900/95 backdrop-blur-md border border-white/20 dark:border-gray-700/50 shadow-2xl",children:[e.jsxs(U,{className:"flex flex-row items-center justify-between",children:[e.jsx(W,{className:"text-xl font-semibold",children:"Verifikasi OTP"}),e.jsx(f,{variant:"ghost",size:"sm",onClick:b,className:"h-8 w-8 p-0",children:e.jsx(se,{className:"h-4 w-4"})})]}),e.jsxs(D,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx(re,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),e.jsx("p",{className:"font-medium text-foreground",children:n})]})]}),!j&&e.jsx("div",{className:"text-center",children:e.jsx(f,{onClick:m,disabled:p,className:"w-full",children:p?"Mengirim...":"Kirim OTP"})}),j&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Masukkan Kode OTP"}),e.jsx(q,{type:"text",placeholder:"123456",value:l,onChange:r=>{const y=r.target.value.replace(/\D/g,"").slice(0,6);w(y),c(null)},className:"text-center text-lg tracking-widest",maxLength:6})]}),e.jsx("div",{className:"text-center",children:S>0?e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsxs("span",{children:["Kirim ulang dalam ",S,"s"]})]}):e.jsx(f,{variant:"outline",size:"sm",onClick:m,disabled:p,children:p?"Mengirim...":"Kirim Ulang OTP"})}),e.jsx(f,{onClick:V,disabled:M||l.length!==6,className:"w-full",children:M?"Memvalidasi...":"Verifikasi OTP"})]}),o&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg",children:[e.jsx(X,{className:"w-4 h-4 text-red-600 dark:text-red-400"}),e.jsx("span",{className:"text-sm text-red-800 dark:text-red-200",children:o})]}),i&&e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsx(F,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),e.jsx("span",{className:"text-sm text-green-800 dark:text-green-200",children:i})]})]})]})}):null}function Ie(){const[v,_]=t.useState(""),[n,T]=t.useState(""),[l,w]=t.useState(""),[M,O]=t.useState(""),[p,I]=t.useState(""),[o,c]=t.useState(null),[i,N]=t.useState(null),[j,P]=t.useState(!1),[S,g]=t.useState(!1),[m,V]=t.useState(null),[b,r]=t.useState(!1),[y,h]=t.useState(!1),[K,C]=t.useState(null),A=()=>{const a=v.trim()!==""&&n.trim()!==""&&l.trim()!=="";P(a)},J=async a=>{V(a),r(!0),g(!1);const d=u.find(x=>x.id===i),s=d?parseInt(d.currentPrice.replace(/[^\d]/g,"")):null;k.updatePaymentInfo({email:n,no_wa:l,metode_pengiriman:"kuota",metode:null,jumlah:s}),o==="coins"&&a>=25e3&&s&&await R()},Y=()=>{n.trim()!==""&&g(!0)},Z=async a=>{c(a);const d=u.find(x=>x.id===i),s=d?parseInt(d.currentPrice.replace(/[^\d]/g,"")):null;if(a==="coins")b&&s&&(k.updatePaymentInfo({email:n,no_wa:l,metode_pengiriman:"kuota",metode:null,jumlah:s}),await R());else{let x=null;a==="gopay"?x="gopay":a==="qris"?x="other_qris":a==="credit-card"&&(x="kreem"),k.updatePaymentInfo({email:n,no_wa:l,metode_pengiriman:"pembayaran",metode:x,jumlah:s})}},ee=a=>{N(a);const d=u.find(x=>x.id===a),s=d?parseInt(d.currentPrice.replace(/[^\d]/g,"")):null;s&&k.updatePaymentInfo({email:n,no_wa:l,metode_pengiriman:o==="coins"?"kuota":"pembayaran",metode:o==="coins"?null:o==="gopay"?"gopay":o==="qris"?"other_qris":o==="credit-card"?"kreem":null,jumlah:s})},R=async()=>{try{h(!0),C(null);const a=k.load();if(!a)throw new Error("Data video tidak ditemukan. Silakan kembali ke halaman setup.");const d={prompt:a.prompt,karakter_image:a.karakter_image,background_image:a.background_image,aspek_rasio:a.aspek_rasio,seeds:null,model_ai:"veo3_fast",metode_pengiriman:"kuota",metode:null,jumlah:a.jumlah,email:a.email||n,no_wa:a.no_wa||l,affiliate_by:""},s=await G.storeVideoData(d);if(s.status)console.log("Video data stored successfully with coins:",s.message),s.data&&s.data["x-api-key"]&&localStorage.setItem("x-api-key",s.data["x-api-key"]),window.location.href="/generate";else throw new Error(s.message||"Gagal menyimpan data video")}catch(a){console.error("Error processing coins payment:",a),C(a instanceof Error?a.message:"Terjadi kesalahan saat memproses pembayaran dengan koin")}finally{h(!1)}},ae=async()=>{try{h(!0),C(null);const a=k.load();if(!a)throw new Error("Data video tidak ditemukan. Silakan kembali ke halaman setup.");const d={prompt:a.prompt,karakter_image:a.karakter_image,background_image:a.background_image,aspek_rasio:a.aspek_rasio,seeds:null,model_ai:"veo3_fast",metode_pengiriman:a.metode_pengiriman||"pembayaran",metode:a.metode,jumlah:a.jumlah,email:a.email||n,no_wa:a.no_wa||l,affiliate_by:""},s=await G.storeVideoData(d);if(s.status)console.log("Video data stored successfully:",s.message),s.data&&s.data["x-api-key"]&&localStorage.setItem("x-api-key",s.data["x-api-key"]),s.data&&s.data.invoice?window.location.href=`/transaksi/${s.data.invoice}`:alert("Pembayaran berhasil! Video Anda sedang diproses.");else throw new Error(s.message||"Gagal menyimpan data video")}catch(a){console.error("Error processing payment:",a),C(a instanceof Error?a.message:"Terjadi kesalahan saat memproses pembayaran")}finally{h(!1)}},u=[{id:"single",title:"1 Video",originalPrice:null,currentPrice:"Rp 25.000",quantity:"1 Video",features:["1 Video HD (720p)","Mendapat 25000 koin","Pilihan karakter & environment","Download langsung"],popular:!1},{id:"package-10",title:"Paket 10 Video",originalPrice:"Rp 250.000",currentPrice:"Rp 200.000",quantity:"10 Video",features:["10 Video HD (720p)","Mendapat 200000 koin","Hemat 20% dari harga satuan","Valid 30 hari"],popular:!0},{id:"package-pro",title:"Paket Pro",originalPrice:"Rp 500.000",currentPrice:"Rp 450.000",quantity:"20 video",features:["20 Video HD (720p)","Mendapat 500000 koin","Hemat 20% dari harga satuan","Valid 30 hari"],popular:!1}],L=[{id:"coins",name:"Gunakan Koin",description:b?`Saldo: ${m?.toLocaleString()} Koin`:"Verifikasi OTP terlebih dahulu",icon:e.jsx(te,{className:"w-6 h-6"}),balance:m?`${m.toLocaleString()} Koin`:"0 Koin",disabled:!b||m!==null&&m<25e3},{id:"gopay",name:"Gopay",description:"Pembayaran dengan Gopay",icon:e.jsx(ue,{className:"w-6 h-6"}),disabled:!1},{id:"qris",name:"QRIS",description:"Pembayaran dengan QRIS",icon:e.jsx(me,{className:"w-6 h-6"}),disabled:!1},{id:"credit-card",name:"Kartu Kredit dan Internasional",description:"Pembayaran dengan Kartu Kredit dan Internasional",icon:e.jsx(z,{className:"w-6 h-6"}),disabled:!1}];return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-foreground mb-4",children:"Pilih Paket & Pembayaran"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl mx-auto",children:"Pilih paket yang sesuai dengan kebutuhan Anda dan metode pembayaran yang diinginkan. Lengkapi informasi pembayaran untuk melanjutkan proses pembuatan video AI Anda."})]}),e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Paket Harga"}),e.jsx("p",{className:"text-muted-foreground",children:"Pilih paket yang sesuai dengan kebutuhan Anda"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-full max-w-6xl",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:u.map(a=>e.jsxs("div",{className:`relative p-6 border rounded-xl cursor-pointer transition-all ${i===a.id?"border-purple-500 bg-purple-50 dark:bg-purple-950/20 shadow-lg":"border-border hover:border-purple-300 hover:shadow-md"} ${a.popular?"ring-2 ring-purple-200 dark:ring-purple-800":""}`,onClick:()=>ee(a.id),children:[a.popular&&e.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2",children:e.jsxs($,{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white border-0 px-4 py-1",children:[e.jsx(le,{className:"w-3 h-3 mr-1"}),"Terpopuler"]})}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ie,{className:"w-8 h-8 text-gray-600 dark:text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-foreground mb-2",children:a.title}),e.jsxs("div",{className:"mb-2",children:[a.originalPrice&&e.jsx("span",{className:"text-sm text-muted-foreground line-through mr-2",children:a.originalPrice}),e.jsx("span",{className:"text-2xl font-bold text-purple-600",children:a.currentPrice})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.quantity})]}),e.jsx("div",{className:"space-y-3",children:a.features.map((d,s)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"w-4 h-4 text-green-600 mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-foreground",children:d})]},s))}),i===a.id&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center mx-auto",children:e.jsx(B,{className:"w-4 h-4 text-white"})})})]},a.id))})})})]}),e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Informasi Pembayaran"}),e.jsx("p",{className:"text-muted-foreground",children:"Lengkapi data diri dan pilih metode pembayaran untuk melanjutkan"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-full max-w-7xl",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{children:e.jsx(E,{className:"bg-card shadow-lg h-full",children:e.jsxs(D,{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(de,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Data Personal"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Informasi yang diperlukan untuk proses pembayaran"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Email"}),e.jsx(q,{type:"email",placeholder:"Masukkan email anda...",value:n,onChange:a=>{T(a.target.value),A()},className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Nomor Telepon"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(q,{type:"tel",placeholder:"Masukkan nomor anda...",value:l,onChange:a=>{w(a.target.value),A()},className:"flex-1"}),e.jsx(f,{variant:"default",disabled:n.trim()==="",onClick:Y,children:"Verifikasi"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center mr-3",children:e.jsx(z,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Metode Pembayaran"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Pilih metode pembayaran yang paling nyaman untuk Anda"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:L.map(a=>e.jsx("div",{className:`p-4 border rounded-xl cursor-pointer transition-all ${a.disabled?"border-border bg-muted cursor-not-allowed opacity-60":o===a.id?"border-purple-500 bg-purple-50 dark:bg-purple-950/20":"border-border hover:border-purple-300 hover:bg-card/50"}`,onClick:()=>!a.disabled&&Z(a.id),children:e.jsxs("div",{className:"flex flex-col items-center text-center space-y-3",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${a.disabled?"bg-muted":"bg-purple-100 dark:bg-purple-900/30"}`,children:e.jsx("div",{className:a.disabled?"text-muted-foreground":"text-purple-600 dark:text-purple-400",children:a.icon})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-semibold text-sm ${a.disabled?"text-muted-foreground":"text-foreground"}`,children:a.name}),e.jsx("p",{className:`text-xs ${a.disabled,"text-muted-foreground"}`,children:a.description})]}),a.balance&&e.jsx($,{variant:"secondary",className:"bg-muted text-muted-foreground text-xs",children:a.balance})]})},a.id))})]})]})})}),(i||o||j)&&e.jsx("div",{children:e.jsxs(E,{className:"bg-card shadow-lg h-full",children:[e.jsx(U,{children:e.jsx(W,{className:"text-xl font-semibold text-foreground",children:"Ringkasan Pesanan"})}),e.jsxs(D,{className:"space-y-6",children:[i&&e.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:u.find(a=>a.id===i)?.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u.find(a=>a.id===i)?.quantity})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-lg font-bold text-purple-600",children:u.find(a=>a.id===i)?.currentPrice})})]}),i&&e.jsxs("div",{className:"flex justify-between items-center p-4 bg-purple-50 dark:bg-purple-950/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Total"}),e.jsx("p",{className:"text-xl font-bold text-purple-600",children:u.find(a=>a.id===i)?.currentPrice})]}),o&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"Metode Pembayaran"}),e.jsx("p",{className:"text-muted-foreground",children:L.find(a=>a.id===o)?.name})]}),j&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"Data Pembeli"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Nama:"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:v})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Email:"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:n})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Telepon:"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:l})]}),p&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Perusahaan:"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:p})]}),b&&m!==null&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Saldo Koin:"}),e.jsxs("span",{className:"text-sm font-medium text-foreground",children:[m.toLocaleString()," Koin"]})]})]})]})]})]})})]})})})]}),j&&e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"flex items-center p-4 bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsx(F,{className:"w-5 h-5 text-green-600 dark:text-green-400 mr-3"}),e.jsx("span",{className:"text-green-800 dark:text-green-200 font-medium",children:"Data diri telah lengkap"})]})}),K&&e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"flex items-center p-4 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg",children:[e.jsx(X,{className:"w-5 h-5 text-red-600 dark:text-red-400 mr-3"}),e.jsx("span",{className:"text-red-800 dark:text-red-200 font-medium",children:K})]})}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsxs(f,{variant:"outline",size:"lg",className:"flex items-center space-x-2",children:[e.jsx(oe,{className:"w-4 h-4"}),e.jsx("span",{children:"Kembali"})]}),e.jsx(f,{size:"lg",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",onClick:ae,children:y?"Memproses...":"Bayar Sekarang"})]}),e.jsx(pe,{isOpen:S,onClose:()=>g(!1),email:n,onSuccess:J})]})}export{Ie as PaymentPage};
